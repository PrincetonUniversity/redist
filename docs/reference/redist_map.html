<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a redist_map object. — redist_map • redist</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create a redist_map object. — redist_map" />
<meta property="og:description" content="Sets up a redistricting problem." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/redist.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/glossary.html">Glossary of Key Redistricting Terms</a>
    </li>
    <li>
      <a href="../articles/map-preproc.html">Map Pre-processing for Special Constraints</a>
    </li>
    <li>
      <a href="../articles/mcmc.html">Redistricting with Flip MCMC</a>
    </li>
    <li>
      <a href="../articles/mpi-slurm.html">MPI / Slurm Sample Scripts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kosukeimai/redist/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a <code>redist_map</code> object.</h1>
    <small class="dont-index">Source: <a href='https://github.com/kosukeimai/redist/blob/master/R/redist_map.R'><code>R/redist_map.R</code></a></small>
    <div class="hidden name"><code>redist_map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Sets up a redistricting problem.</p>
    </div>

    <pre class="usage"><span class='fu'>redist_map</span><span class='op'>(</span>
  <span class='va'>...</span>,
  existing_plan <span class='op'>=</span> <span class='cn'>NULL</span>,
  pop_tol <span class='op'>=</span> <span class='fl'>0.01</span>,
  total_pop <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"pop"</span>, <span class='st'>"population"</span>, <span class='st'>"total_pop"</span><span class='op'>)</span>,
  ndists <span class='op'>=</span> <span class='cn'>NULL</span>,
  pop_bounds <span class='op'>=</span> <span class='cn'>NULL</span>,
  adj <span class='op'>=</span> <span class='cn'>NULL</span>,
  adj_col <span class='op'>=</span> <span class='st'>"adj"</span>,
  planarize <span class='op'>=</span> <span class='fl'>3857</span>
<span class='op'>)</span>

<span class='fu'>as_redist_map</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>column elements to be bound into a <code>redist_map</code> object or a
single <code>list</code> or <code>data.frame</code>.  These will be passed on to the
<code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> constructor.</p></td>
    </tr>
    <tr>
      <th>existing_plan</th>
      <td><p><code><a href='https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html'>&lt;tidy-select&gt;</a></code> the
existing district assignment.</p></td>
    </tr>
    <tr>
      <th>pop_tol</th>
      <td><p><code><a href='https://dplyr.tidyverse.org/reference/dplyr_data_masking.html'>&lt;data-masking&gt;</a></code> the population tolerance.
The percentage deviation from the average population will be constrained to
be no more than this number.</p></td>
    </tr>
    <tr>
      <th>total_pop</th>
      <td><p><code><a href='https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html'>&lt;tidy-select&gt;</a></code> the vector
of precinct populations. Defaults to the <code>pop</code>, <code>population</code>, or
<code>total_pop</code> columns, if one exists.</p></td>
    </tr>
    <tr>
      <th>ndists</th>
      <td><p><code><a href='https://dplyr.tidyverse.org/reference/dplyr_data_masking.html'>&lt;data-masking&gt;</a></code> the integer number of
districts to partition the map into. Must be specified if <code>existing_plan</code> is not supplied.</p></td>
    </tr>
    <tr>
      <th>pop_bounds</th>
      <td><p><code><a href='https://dplyr.tidyverse.org/reference/dplyr_data_masking.html'>&lt;data-masking&gt;</a></code> more specific
population bounds, in the form of <code><a href='https://rdrr.io/r/base/c.html'>c(lower, target, upper)</a></code>.</p></td>
    </tr>
    <tr>
      <th>adj</th>
      <td><p>the adjacency graph for the object. Defaults to being computed
from the data if it is coercible to a shapefile.</p></td>
    </tr>
    <tr>
      <th>adj_col</th>
      <td><p>the name of the adjacency graph column</p></td>
    </tr>
    <tr>
      <th>planarize</th>
      <td><p>a number, indicating the CRS to project the shapefile to if
it is latitude-longitude based. Set to NULL or FALSE to avoid planarizing.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>an object to be coerced</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A <code>redist_map</code> object is a <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code> which contains an
adjacency list and additional information about the number of districts and
population bounds.  It supports all of the <code>dplyr</code> generics, and will
adjust the adjacency list and attributes according to these functions; i.e.,
if we <code>filter</code> to a subset of units, the graph will change to subset to
these units, and the population bounds will adjust accordingly.  If an
existing map is also attached to the object, the number of districts will
also adjust.  Subsetting with <code><a href='https://rdrr.io/r/base/Extract.html'>`[`</a></code> and <code><a href='https://rdrr.io/r/base/Extract.html'>`[[`</a></code> does not recompute
graphs or attributes.</p>
<p>Other useful methods for <code>redist_map</code> objects:</p><ul>
<li><p><code><a href='merge_by.html'>merge_by</a></code></p></li>
<li><p><code><a href='get_adj.html'>get_adj</a></code></p></li>
<li><p><code><a href='plot.redist_map.html'>plot.redist_map</a></code></p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>fl25</span><span class='op'>)</span>
<span class='va'>d</span> <span class='op'>=</span> <span class='fu'>redist_map</span><span class='op'>(</span><span class='va'>fl25</span>, ndists<span class='op'>=</span><span class='fl'>3</span>, pop_tol<span class='op'>=</span><span class='fl'>0.05</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Projecting to CRS 3857</span></div><div class='input'><span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>d</span>, <span class='va'>pop</span> <span class='op'>&gt;=</span> <span class='fl'>10e3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; A redist_map object with 5 units and 13 fields
#&gt; To be partitioned into 3 districts with population between 26,695.67 - -107.6378% and 26,695.67 + 129.4944%
#&gt; With geometry:
#&gt;     bbox:           xmin: -9107951 ymin: 3047341 xmax: -9065127 ymax: 3085829
#&gt;     projected CRS:  WGS 84 / Pseudo-Mercator
#&gt; <span style='color: #949494;'># A tibble: 5 x 13</span><span>
#&gt;   geoid10    pop   vap obama mccain TotPop BlackPop HispPop   VAP BlackVAP
#&gt; </span><span style='color: #BCBCBC;'>*</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> 2519.0_0 </span><span style='text-decoration: underline;'>15</span><span>993 </span><span style='text-decoration: underline;'>12</span><span>379   647   </span><span style='text-decoration: underline;'>1</span><span>522  </span><span style='text-decoration: underline;'>15</span><span>993      863    </span><span style='text-decoration: underline;'>1</span><span>980 </span><span style='text-decoration: underline;'>12</span><span>379      582
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> 2396.0_0 </span><span style='text-decoration: underline;'>12</span><span>853  </span><span style='text-decoration: underline;'>8</span><span>965   640   </span><span style='text-decoration: underline;'>1</span><span>027  </span><span style='text-decoration: underline;'>12</span><span>853     </span><span style='text-decoration: underline;'>2</span><span>368    </span><span style='text-decoration: underline;'>3</span><span>860  </span><span style='text-decoration: underline;'>8</span><span>965     </span><span style='text-decoration: underline;'>1</span><span>468
#&gt; </span><span style='color: #BCBCBC;'>3</span><span> 2515.0_0 </span><span style='text-decoration: underline;'>22</span><span>218 </span><span style='text-decoration: underline;'>14</span><span>513   506    641  </span><span style='text-decoration: underline;'>22</span><span>218     </span><span style='text-decoration: underline;'>5</span><span>911    </span><span style='text-decoration: underline;'>8</span><span>800 </span><span style='text-decoration: underline;'>14</span><span>513     </span><span style='text-decoration: underline;'>3</span><span>417
#&gt; </span><span style='color: #BCBCBC;'>4</span><span> 2525.0_0 </span><span style='text-decoration: underline;'>16</span><span>734 </span><span style='text-decoration: underline;'>14</span><span>720   826   </span><span style='text-decoration: underline;'>1</span><span>414  </span><span style='text-decoration: underline;'>16</span><span>734      197     791 </span><span style='text-decoration: underline;'>14</span><span>720      155
#&gt; </span><span style='color: #BCBCBC;'>5</span><span> 1246.0_0 </span><span style='text-decoration: underline;'>12</span><span>289  </span><span style='text-decoration: underline;'>7</span><span>734   366    271  </span><span style='text-decoration: underline;'>12</span><span>289     </span><span style='text-decoration: underline;'>1</span><span>693    </span><span style='text-decoration: underline;'>9</span><span>773  </span><span style='text-decoration: underline;'>7</span><span>734     </span><span style='text-decoration: underline;'>1</span><span>062
#&gt; </span><span style='color: #949494;'># ... with 3 more variables: HispVAP &lt;dbl&gt;, geometry &lt;POLYGON [m]&gt;, adj &lt;list&gt;</span><span></div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ben Fifield, Christopher T. Kenny, Cory McCartan, Jun Kawahara, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


