<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a redist_map object. — redist_map • redist</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a redist_map object. — redist_map"><meta property="og:description" content="Sets up a redistricting problem."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/redist.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/common_args.html">Common Arguments to `redist` Functions</a>
    </li>
    <li>
      <a href="../articles/map-preproc.html">Map Pre-processing for Special Constraints</a>
    </li>
    <li>
      <a href="../articles/mcmc.html">Redistricting with Flip MCMC</a>
    </li>
    <li>
      <a href="../articles/mpi-slurm.html">MPI / Slurm Sample Scripts</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://alarm-redist.github.io/posts/2021-04-02-redist-300/" class="external-link">redist 3.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/alarm-redist/redist/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a <code>redist_map</code> object.</h1>
    <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redist/blob/HEAD/R/redist_map.R" class="external-link"><code>R/redist_map.R</code></a></small>
    <div class="hidden name"><code>redist_map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Sets up a redistricting problem.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">redist_map</span><span class="op">(</span>
  <span class="va">...</span>,
  existing_plan <span class="op">=</span> <span class="cn">NULL</span>,
  pop_tol <span class="op">=</span> <span class="cn">NULL</span>,
  total_pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pop"</span>, <span class="st">"population"</span>, <span class="st">"total_pop"</span>, <span class="st">"POP100"</span><span class="op">)</span>,
  ndists <span class="op">=</span> <span class="cn">NULL</span>,
  pop_bounds <span class="op">=</span> <span class="cn">NULL</span>,
  adj <span class="op">=</span> <span class="cn">NULL</span>,
  adj_col <span class="op">=</span> <span class="st">"adj"</span>,
  planarize <span class="op">=</span> <span class="fl">3857</span>
<span class="op">)</span>

<span class="fu">as_redist_map</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>column elements to be bound into a <code>redist_map</code> object or a
single <code>list</code> or <code>data.frame</code>.  These will be passed on to the
<code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></code> constructor.</p></dd>
<dt>existing_plan</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">&lt;tidy-select&gt;</a></code> the
existing district assignment. Must be numeric or convertible to numeric.</p></dd>
<dt>pop_tol</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> the population tolerance.
The percentage deviation from the average population will be constrained to
be no more than this number. If <code>existing_plan</code> is provided, defaults to
the parity of that plan; otherwise, defaults to 0.01.</p></dd>
<dt>total_pop</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">&lt;tidy-select&gt;</a></code> the vector
of precinct populations. Defaults to the <code>pop</code>, <code>population</code>, or
<code>total_pop</code> columns, if one exists.</p></dd>
<dt>ndists</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> the integer number of
districts to partition the map into. Must be specified if <code>existing_plan</code> is not supplied.</p></dd>
<dt>pop_bounds</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> more specific
population bounds, in the form of <code>c(lower, target, upper)</code>.</p></dd>
<dt>adj</dt>
<dd><p>the adjacency graph for the object. Defaults to being computed
from the data if it is coercible to a shapefile.</p></dd>
<dt>adj_col</dt>
<dd><p>the name of the adjacency graph column</p></dd>
<dt>planarize</dt>
<dd><p>a number, indicating the CRS to project the shapefile to if
it is latitude-longitude based. Set to NULL or FALSE to avoid planarizing.</p></dd>
<dt>x</dt>
<dd><p>an object to be coerced</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A redist_map object</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>A <code>redist_map</code> object is a <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></code> which contains an
adjacency list and additional information about the number of districts and
population bounds.  It supports all of the <code>dplyr</code> generics, and will
adjust the adjacency list and attributes according to these functions; i.e.,
if we <code>filter</code> to a subset of units, the graph will change to subset to
these units, and the population bounds will adjust accordingly.  If an
existing map is also attached to the object, the number of districts will
also adjust.  Subsetting with <code>`[`</code> and <code>`[[`</code> does not recompute
graphs or attributes.</p>
<p>Other useful methods for <code>redist_map</code> objects:</p><ul><li><p><code><a href="merge_by.html">merge_by</a></code></p></li>
<li><p><code><a href="get_adj.html">get_adj</a></code></p></li>
<li><p><code><a href="plot.redist_map.html">plot.redist_map</a></code></p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">fl25</span><span class="op">)</span></span>
<span class="r-in"><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">redist_map</span><span class="op">(</span><span class="va">fl25</span>, ndists <span class="op">=</span> <span class="fl">3</span>, pop_tol <span class="op">=</span> <span class="fl">0.05</span>, total_pop <span class="op">=</span> <span class="va">pop</span><span class="op">)</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Projecting to CRS 3857</span>
<span class="r-in"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">pop</span> <span class="op">&gt;=</span> <span class="fl">10e3</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Your subset was not based on districts.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> → Please use `set_pop_tol()` to update your <span style="color: #0000BB;">&lt;redist_map&gt;</span> or create a new</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   <span style="color: #0000BB;">&lt;redist_map&gt;</span> with the correct number of districts.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A <span style="color: #0000BB;">&lt;redist_map&gt;</span> with 5 units and 13 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To be partitioned into 3 districts with population between 26,696 - -107.64% and 26,696 + 129.49%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> With geometry:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bbox:           xmin: -9108000 ymin: 3047300 xmax: -9065100 ymax: 3085800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     projected CRS:  WGS 84 / Pseudo-Mercator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   geoid10    pop   vap obama mccain TotPop BlackPop HispPop   VAP BlackVAP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2519.0_0 <span style="text-decoration: underline;">15</span>993 <span style="text-decoration: underline;">12</span>379   647   <span style="text-decoration: underline;">1</span>522  <span style="text-decoration: underline;">15</span>993      863    <span style="text-decoration: underline;">1</span>980 <span style="text-decoration: underline;">12</span>379      582</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2396.0_0 <span style="text-decoration: underline;">12</span>853  <span style="text-decoration: underline;">8</span>965   640   <span style="text-decoration: underline;">1</span>027  <span style="text-decoration: underline;">12</span>853     <span style="text-decoration: underline;">2</span>368    <span style="text-decoration: underline;">3</span>860  <span style="text-decoration: underline;">8</span>965     <span style="text-decoration: underline;">1</span>468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2515.0_0 <span style="text-decoration: underline;">22</span>218 <span style="text-decoration: underline;">14</span>513   506    641  <span style="text-decoration: underline;">22</span>218     <span style="text-decoration: underline;">5</span>911    <span style="text-decoration: underline;">8</span>800 <span style="text-decoration: underline;">14</span>513     <span style="text-decoration: underline;">3</span>417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2525.0_0 <span style="text-decoration: underline;">16</span>734 <span style="text-decoration: underline;">14</span>720   826   <span style="text-decoration: underline;">1</span>414  <span style="text-decoration: underline;">16</span>734      197     791 <span style="text-decoration: underline;">14</span>720      155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 1246.0_0 <span style="text-decoration: underline;">12</span>289  <span style="text-decoration: underline;">7</span>734   366    271  <span style="text-decoration: underline;">12</span>289     <span style="text-decoration: underline;">1</span>693    <span style="text-decoration: underline;">9</span>773  <span style="text-decoration: underline;">7</span>734     <span style="text-decoration: underline;">1</span>062</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 3 more variables: HispVAP &lt;dbl&gt;, geometry &lt;POLYGON [m]&gt;, adj &lt;list&gt;</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

