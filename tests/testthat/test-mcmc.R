test_that("mcmc works", {
  set.seed(1, kind = "Mersenne-Twister", normal.kind = "Inversion")
  out <- redist.mcmc(adj = adj, total_pop = pop,
                     nsims = 10, ndists = 3, verbose = FALSE)
  expected <- structure(c(0, 0, 0, 0, 1, 2, 1, 1, 2, 1, 2, 2, 2, 2, 2, 0, 0,
                          0, 0, 0, 0, 1, 2, 1, 1, 2, 0, 0, 0, 1, 2, 1, 1, 2, 1, 2, 2, 2,
                          2, 2, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 2, 0, 0, 1, 2, 1, 1, 2,
                          1, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2, 0, 0, 0, 1,
                          2, 1, 1, 2, 1, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 1, 2, 1, 1, 2,
                          0, 0, 0, 1, 2, 1, 1, 2, 1, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0,
                          2, 1, 1, 2, 0, 0, 0, 1, 2, 1, 1, 2, 1, 2, 2, 2, 2, 2, 0, 0, 0,
                          0, 1, 0, 1, 2, 1, 1, 2, 0, 0, 0, 1, 2, 1, 1, 2, 1, 1, 2, 2, 2,
                          2, 0, 0, 0, 0, 1, 0, 1, 2, 1, 1, 2, 0, 0, 0, 1, 2, 1, 1, 2, 1,
                          1, 2, 2, 2, 2, 0, 0, 0, 0, 1, 2, 1, 2, 1, 1, 2, 0, 0, 0, 1, 2,
                          1, 1, 2, 1, 1, 2, 2, 2, 2, 0, 0, 0, 0, 1, 0, 1, 2, 1, 1, 2, 0,
                          0, 0, 1, 2, 1, 1, 2, 1, 1, 2, 2, 2, 2, 0, 0, 0, 0, 1, 2, 1, 2,
                          1, 1), .Dim = c(25L, 10L))

  expect_equal(out$plans, expected)
})
